<ui:FluentWindow x:Class="Returnly.Dialogs.MultiFilePasswordDialog"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 Title="PDF Passwords Required"
                 Height="500"
                 Width="600"
                 WindowStartupLocation="CenterOwner"
                 ResizeMode="NoResize">
    
    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
            <ui:SymbolIcon Symbol="LockClosed24" 
                          FontSize="24" 
                          Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"
                          Margin="0,0,15,0"/>
            <StackPanel>
                <TextBlock Text="Password Protected Files" 
                          FontSize="18" 
                          FontWeight="SemiBold"/>
                <TextBlock x:Name="SubtitleText"
                          Text="Multiple files require passwords"
                          FontSize="12"
                          Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                          Margin="0,5,0,0"/>
            </StackPanel>
        </StackPanel>

        <!-- Instructions -->
        <TextBlock Grid.Row="1" 
                  Text="The following PDF files are password protected. Please enter the password for each file:"
                  TextWrapping="Wrap"
                  Margin="0,0,0,15"
                  Style="{StaticResource SubtitleTextStyle}"/>

        <!-- Password Inputs -->
        <ScrollViewer Grid.Row="2" 
                      VerticalScrollBarVisibility="Auto"
                      Margin="0,0,0,20">
            <StackPanel x:Name="PasswordInputsPanel"/>
        </ScrollViewer>

        <!-- Global Error Message -->
        <TextBlock x:Name="GlobalErrorMessage"
                  Grid.Row="3"
                  Foreground="Red"
                  TextWrapping="Wrap"
                  Visibility="Collapsed"
                  Margin="0,0,0,15"
                  FontWeight="Medium"/>

        <!-- Buttons -->
        <StackPanel Grid.Row="4" 
                   Orientation="Horizontal" 
                   HorizontalAlignment="Right">
            <ui:Button x:Name="ValidateButton"
                      Content="Validate Passwords"
                      Click="Validate_Click"
                      Appearance="Secondary"
                      Margin="0,0,10,0"
                      Padding="20,8"/>
            <ui:Button Content="Cancel"
                      Click="Cancel_Click"
                      Appearance="Secondary"
                      Margin="0,0,10,0"
                      Padding="20,8"/>
            <ui:Button x:Name="OKButton"
                      Content="Continue"
                      Click="OK_Click"
                      Appearance="Primary"
                      Padding="20,8"
                      IsEnabled="False"/>
        </StackPanel>
    </Grid>
</ui:FluentWindow>
